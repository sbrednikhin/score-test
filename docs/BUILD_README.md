# Сборка и запуск проекта sw_battle_test

## Быстрый старт

### 1. Обновление проекта Visual Studio
Запустите батник для обновления проекта:
```batch
update_vs_project.bat
```

Этот батник:
- **Интеллектуально управляет проектом**: генерирует при отсутствии, обновляет при наличии
- Перегенерирует CMake файлы для Visual Studio только при необходимости
- Собирает проект в Debug конфигурации
- Настраивает аргументы командной строки для запуска

### 2. Тестирование программы
Запустите программу с тестовым сценарием:
```batch
test_run.bat
```

Или запустите вручную:
```batch
build\Debug\sw_battle_test.exe commands_example.txt
```

## Логика работы update_vs_project.bat

Батник `update_vs_project.bat` использует интеллектуальную логику для управления проектом:

1. **Если директория `build` отсутствует**:
   - Создает директорию `build`
   - Генерирует проект с помощью CMake
   - Собирает проект

2. **Если директория `build` существует**:
   - Переходит в `build`
   - Если `CMakeCache.txt` существует → использует существующую конфигурацию
   - Если `CMakeCache.txt` отсутствует → генерирует проект заново
   - Всегда пересобирает проект

Это позволяет:
- Быстро пересобирать проект при изменениях в исходном коде
- Перегенерировать проект только при необходимости
- Экономить время на повторных запусках

## Настройки Visual Studio

### Аргументы командной строки
Проект автоматически настраивается для запуска с файлом `commands_example.txt` в качестве аргумента.

### Рабочая директория
Для Debug и Release конфигураций установлена рабочая директория на уровень выше проектной (`$(ProjectDir)\..`), что позволяет программе находить файлы команд в корне проекта.

### Обработка исключений
В проекте включена поддержка исключений C++ (`ExceptionHandling=Sync`).

## Структура файлов

```
├── update_vs_project.bat    # Обновление проекта VS
├── test_run.bat            # Тестирование программы
├── commands_example.txt    # Тестовый сценарий команд
├── CMakeLists.txt         # Конфигурация CMake
├── src/                   # Исходный код
├── build/                 # Сгенерированные файлы VS
│   ├── sw_battle_test.sln
│   ├── sw_battle_test.vcxproj
│   └── sw_battle_test.vcxproj.user  # Настройки запуска
└── docs/
    └── project_analysis.md # Анализ проекта
```

## Ручная сборка

Если нужно собрать вручную:

```batch
mkdir build
cd build
cmake .. -G "Visual Studio 17 2022" -A x64
cmake --build . --config Debug
```

## Запуск в Visual Studio

1. Откройте `build/sw_battle_test.sln`
2. Установите `sw_battle_test` как стартовый проект
3. Нажмите F5 для запуска в режиме отладки

Аргументы командной строки уже настроены в файле `.vcxproj.user`.

## Устранение неполадок

### Ошибка доступа к файлам
Если при запуске `update_vs_project.bat` возникают ошибки доступа к файлам:
1. Закройте Visual Studio
2. Удалите папку `build` вручную
3. Запустите батник снова

### Программа не запускается
Убедитесь, что:
- Файл `commands_example.txt` существует в корневой директории
- Исполняемый файл создан в `build/Debug/sw_battle_test.exe`
- Аргументы командной строки настроены правильно
